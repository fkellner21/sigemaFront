<div class="modal" tabindex="-1" style="display: block">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          {{ equipoForm.id ? "Actualizar equipo" : "Agregar equipo" }}
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
          (click)="onCancel()"
        ></button>
      </div>

      <div class="modal-body">
        <form #maquinaForm="ngForm" (ngSubmit)="onSubmit()">
          <!-- UNIDAD -->
          <p>Unidad</p>
          <select
            class="form-control my-2"
            [(ngModel)]="equipoForm.idUnidad"
            name="unidad"
            required
          >
            <option value="">Seleccione una unidad</option>
            <option *ngFor="let unidad of unidades" [value]="unidad.id">
              {{ unidad.nombre }}
            </option>
          </select>

          <!-- TIPO -->
          <p>Tipo de equipo</p>
          <select
            class="form-control my-2"
            [(ngModel)]="tipoSeleccionado"
            name="tipoEquipo"
            (change)="onTipoEquipoChange($event)"
            required
          >
            <option value="">Seleccione un tipo</option>
            <option *ngFor="let tipo of tiposEquipo" [value]="tipo.id">
              {{ tipo.codigo }}
            </option>
          </select>

          <!-- MARCA -->
          <p>Marca</p>
          <select
            class="form-control my-2"
            [(ngModel)]="marcaSeleccionada"
            name="marca"
            (change)="onMarcaChange($event)"
            [disabled]="!tipoSeleccionado"
            required
          >
            <option value="">Seleccione una marca</option>
            <option *ngFor="let marca of marcasFiltradas" [value]="marca.id">
              {{ marca.nombre }}
            </option>
          </select>

          <!-- MODELO -->
          <p>Modelo</p>
          <select
            class="form-control my-2"
            [(ngModel)]="equipoForm.idModeloEquipo"
            name="modelo"
            (change)="onModeloChange($event)"
            [disabled]="!marcaSeleccionada"
            required
          >
            <option value="">Seleccione un modelo</option>
            <option *ngFor="let modelo of modelosFiltrados" [value]="modelo.id">
              {{ modelo.modelo }}
            </option>
          </select>

          <!-- AÑO -->
          <p>Año</p>
          <input
            class="form-control my-2"
            [value]="anioModelo"
            readonly
            type="number"
          />

          <!-- MATRÍCULA -->
          <p>Matrícula</p>
          <input
            class="form-control my-2"
            [(ngModel)]="equipoForm.matricula"
            name="matricula"
          />

          <!-- USO -->
          <p>
            {{ equipoForm.modeloEquipo.unidadMedida || "Unidad de medida" }}
          </p>
          <input
            class="form-control my-2"
            [(ngModel)]="equipoForm.cantidadUnidadMedida"
            name="cantidadUnidadMedida"
          />

          <!-- ESTADO -->
          <p>Estado</p>
          <select
            class="form-control my-2"
            [(ngModel)]="equipoForm.estado"
            name="estadoEquipo"
            required
          >
            <option value="">Seleccione un estado</option>
            <option *ngFor="let estado of estados" [value]="estado">
              {{ estado }}
            </option>
          </select>

          <!-- OBSERVACIONES -->
          <p>Observaciones</p>
          <textarea
            class="form-control my-2"
            [(ngModel)]="equipoForm.observaciones"
            name="observaciones"
          ></textarea>

          <!-- BOTONES -->
          <div class="row justify-content-between mt-3">
            <div class="col-4">
              <button
                type="submit"
                class="btn btn-primary w-100"
                [disabled]="maquinaForm.invalid"
              >
                {{ equipoForm.id ? "Actualizar" : "Guardar" }}
              </button>
            </div>
            <div class="col-4">
              <button
                type="button"
                class="btn btn-secondary w-100"
                (click)="onCancel()"
              >
                Cerrar
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
